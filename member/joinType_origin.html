<!DOCTYPE html>
<html>
<head>
  <title>뉴올</title>
  <link rel="stylesheet" href="../css/all.min.css">
  <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/header.css">
      <link rel="stylesheet" href="../css/index/footer.css">
  <link rel="stylesheet" href="../css/member.css">
</head>
<body>
  <header>
		<div class="headerWrap">
			<!-- 로그인 , 회원가입 등 네비게이션 최상단 메뉴 -->
			<div class="navigationStatus">
				<div class="container">
					<ul class="navigationStatus-wrap">
						<li>
							<a href="">로그인</a>
						</li>
						<li>
							<a href="">회원가입</a>
						</li>
					</ul>
				</div>
			</div>
			<div class="navigationContent mot2">
				<div class="navigationContent-wrap">
								<span class="liUnder mot2"></span>
				<div class="container">
				<div class="navigationWrap">
					<div class="logo">
						<div class="imgWrap">
							<img src="../images/logo.png" />
						</div>
					</div>

						<!-- 네비게이션 메뉴 -->
					<nav>
						<ul class="navigation">
						<div class="bannerBox mot2">
							<ul class="theory navigation-switch">
								<li class="root">
									<a class="rootA" href="">ciat소개</a>
								</li>
								<li class="root">
									<a class="rootA" href="">모집공고</a>
								</li>
								<li class="root">
									<a class="rootA" href="">전문정보</a>
								</li>
								<li class="root">
									<a class="rootA" href="">알림정보</a>
								</li>
							</ul>
							</div>
						</div>
					</ul>
					</nav>
					<div class="uber">
						<div class="uberButton">
							<a><i class="fal fa-bars"></i></a>
						</div>
						</div>
					</div>
					</div>
					<div class="headerDoor navigation-switch">
						<div class="container">
							<div class="uberSection">
											<ul class="uberMenu">
												<li class="uberColumn">
													<ul>
														<!--베스티안치과-->
														<li><a href="http://www.yangak.com/new/intro/index.php">베스티안 치과 소개</a></li>
														<li><a href="http://www.yangak.com/new/intro/index1.php">대표원장 인사말</a></li>
														<li><a href="http://www.yangak.com/new/intro/index2.php">의료진 소개</a></li>
														<li><a href="http://www.yangak.com/new/intro/index3.php">진료안내</a></li>
														<li><a href="http://www.yangak.com/new/intro/index4.php">오시는 길</a></li>

													</ul>
												</li>
												<li class="uberColumn">
													<ul>
														<!--프로그램안내-->
														<li><a href="http://www.yangak.com/new/implant01/index1.php">보험 임플란트</a></li>
														<li><a href="http://www.yangak.com/new/implant01/index2.php">당뇨 임플란트</a></li>
														<li><a href="http://www.yangak.com/new/implant01/index3.php">무치약 임플란트</a></li>


													</ul>
												</li>
												<li class="uberColumn">
													<ul>
														<!--양악수술 -->
															<li><a href="http://www.yangak.com/new/yangak/index.php">베스티안 양악수술</a></li>
															<li><a href="http://www.yangak.com/new/yangak/index1.php">BOS SYSTEM</a></li>
															<li><a href="http://www.yangak.com/new/yangak/index2.php">베스티안 선수술</a></li>
															<li><a href="http://www.yangak.com/new/yangak/index3.php">BOS V라인수술</a></li>
															<li><a href="http://www.yangak.com/new/yangak/index4.php">증상별 클리닉</a></li>
															<li><a href="http://www.yangak.com/new/yangak/index10.php">자가수혈 시스템</a></li>
													</ul>
												</li>
												<li class="uberColumn">
													<ul>
														<!-- <li>안면윤곽-->
															<li><a href="http://www.yangak.com/new/v_clinic/index.php">베스티안 안면윤곽</a></li>
															<li><a href="http://www.yangak.com/new/v_clinic/index1.php">증상별 클리닉</a></li>
															<li><a href="http://www.yangak.com/new/v_clinic/index6.php">자가수혈 시스템</a></li>
													</ul>
												</li>
											</ul>
								</div>

						</div>
					</div>
				</div>

			</div>
			<div class="header-padding">

			</div>

			</div>
		</div>
	</header>
  <div id="main">
  <div class="container">
    <div class="subP dy-box">
      <div class="subPage">
        <section class="join">
          <div class="sectionHeader">
            <h2>회원가입</h2>
            <p>allct에 회원가입을 하시면 임상시험에 대한 다양한
              정보를 제공해 드립니다.</p>
          </div>

  					<div class="memberProcedure">
  						<!-- <div class="small_navigation">
  						<a><i class="fas fa-home"></i>홈</a><span>><a
  							href="">회원가입</a></span>
  					</div> -->
  						<div class="article selected">
  							<span><a>회원유형 선택</a></span>
  						</div>
  						<div class="article">
  							<span><a>이용약관 동의</a></span>
  						</div>
  						<div class="article">
  							<span><a>회원정보 입력</a></span>
  						</div>
  						<div class="article">
  							<span><a>회원가입 완료</a></span>
  						</div>

  					</div>

  					<div class="join-type">
  						<div>
  							<img src="/resources/images/typeUser.png" onclick="location.href='joinTerms?type=user' " alt="일반 회원가입 아이콘">
  							<h2 onclick="location.href='joinTerms?type=user'">일반 회원가입</h2>
  						</div>
  						<div>
  							<img src="/resources/images/typeHospital.png" onclick="location.href='joinBenefit'" alt="의료기관/제약사/기업 회원가입 아이콘">
  							<h2 onclick="location.href='joinBenefit' ">의료기관/제약사/기업 회원가입</h2>
  						</div>
  					</div>


  				</section>
      </div>
    </div>
  </div>
  <footer>
  	<div class="footer-wrap">
  		<div class="imgWrap">
  			<img src="../images/main/footer-logo.png" alt="CIAT 로고" />
  		</div>

  		<div class="footer-content">
  			<div class="footer-header">
  				<p>
  					개인정보 취급방침 | 이용약관
  				</p>
  			</div>
  			<div class="footer-body">
  				<p>
  					(주) Fineinsight
  				</p>
  				<p>
  					04798 서울시 성동구 성수이로 22길 37 성수동 아크밸리 401, 402 (서울산업진흥원 성수 IT 종합센터)
  				</p>

  				<p>
  					대표자: 신현경 | 사업자등록번호: 211-88-93785
  				</p>
  			</div>

  			<div class="footer-bottom">
  				<p>
  					Copyright &copy; Fineinsight all rights reserved
  				</p>
  			</div>
  		</div>
  	</div>

  </footer>

  <script src="../js/vendor/jquery-3.4.1.min.js"></script>
  <script src="../js/vendor/TweenMax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script src="../js/header.js"></script>
    	<script src="../js/vendor/sweetalert2.all.min.js"></script>
  <script type="text/javascript">
    $(function() {






    });




    /* 페이지네이션 , 리스트 출력 JS */
    function page(curPage) {

      console.log(curPage);

          $.ajax({
              url : "recruitListBioAjax",
              data : {plusPage : plusPage, orderBy : orderBy, memberId : memberId, curPage : curPage , jsonData : jsonData},
              type : 'post',
              success : function(data){
                  var results = data.list;
                var str = '';
                 $.each(results , function(i){

                  var link = "'recruitDetail?test_id="+results[i].testId+"'";
            var timestamp = results[i].testDeadline
                  var date = foo(timestamp);
            console.log(date);

                  if(results[i].testDday > 0){
                      str += '<tr id="bookmark'+results[i].testId+'" class ="dayOver">';
                  }else{
                      str += '<tr id="bookmark'+results[i].testId+'">';
                  }
                    str += '<td class="text-center"><div class="firstBox" data-id = "'+results[i].testId+'">';
                    if(results[i].testDday <= 0){
                      if(results[i].bol == 'true'){
                        str += '<i class="fas fa-star pickOn" id="svg'+results[i].testId+'"></i></div></td>';
                      }else{
                        str += '<i class="fas fa-star" id="svg'+results[i].testId+'"></i></div></td>';
                      }
                  }else{
                        str += '</div></td>';
                  }
                    if(results[i].testType == '생동성'){
                      str += '<td><div class="info"><div class="info-article other"><span>'+results[i].testType+'</span></div></div></td>'
                    }else{
                      str += '<td><div class="info"><div class="info-article "><span>'+results[i].testType+'</span></div></div></td>'
                    }
                    str += '<td><div class="secondBox"><div class="clear"><div class="mobileHead"><span>'+date+'</span><span>'+results[i].clientinfoName+'</span></div><a><h6 onclick="location.href='+link+'">'+results[i].testName+'</h6></a><ul class="list-inline"><li><span>'+results[i].testType2+'</span></li>'
                    if(results[i].testGender == '무관'){
                      str += '<li><span>성별 무관</span></li>'
                    }else{
                      str += '<li><span>'+results[i].testGender+'</span></li>'
                    }
                    if(results[i].testStartage == 0 && results[i].testEndage == 100){
                      str += '<li><span>나이 무관</span></li>'
                    }else{
                      str += '<li><span>'+results[i].testStartage+'세~'+results[i].testEndage+'세</span></li>'
                    }
                    str += '</ul></div></div></td>'
                    str += '<td><div class="table-text"><span>'+results[i].clientinfoName+'</span></div></td>'
                  if(results[i].testDday > 0){
                      str += '<td><div class="table-text"><span>'+date+'</span><br/><span>마감</span></div></td>'
                  }else if(results[i].testDday == 0){
                      str += '<td><div class="table-text"><span>'+date+'</span><br/><span class="dateDday">D-day</span></div></td>'
                  }else{
                      str += '<td><div class="table-text"><span>'+date+'</span><br/><span class="dateDday">D'+results[i].testDday+'</span></div></td>'
                  }
                    //str += '<td><div class="table-text"><span>'+results[i].cnp+'/'+results[i].testMax+'</span></div></td>'
                      str += '</tr>';
                  });

                 var pagination = '';

                  pagination += '<ul id="pagination" class="pagination-sm pagination">';
                  if(data.pagination.curRange != 1){
                    pagination += '<li class="page-item first" data-cnt = "1">  <a href="javascript:page(1);" data-cnt = "1" class="page-link" >처음</a></li>';
                  }
                  if(data.pagination.curPage != 1){
                    pagination += '<li class="page-item prev" data-cnt = "'+data.pagination.prevPage+'">  <a href="javascript:page('+data.pagination.prevPage+');" data-cnt = "'+data.pagination.prevPage+'" class="page-link">이전</a> </li>';
                  }
                  for(var i = data.pagination.startPage; i<=data.pagination.endPage; i++){
                    if(i == data.pagination.curPage){
                        pagination += '<li class="page-item active " data-cnt = "'+i+'"><a href="javascript:void(0);" class="page-link active" data-cnt = "'+i+'" style="font-weight: bold;" >'+i+'</a></li>';
                    }else{
                        pagination += '<li class="page-item " data-cnt = "'+i+'"><a href="javascript:page('+i+');" class="page-link" data-cnt = "'+i+'">'+i+'</a></li>';
                    }
                  }
                  if(data.pagination.curPage != data.pagination.pageCnt && data.pagination.pageCnt > 0){
                    pagination += '<li class="page-item next" data-cnt = "'+data.pagination.nextPage+'"><a href="javascript:page('+data.pagination.nextPage+');" data-cnt = "'+data.pagination.nextPage+'" class="page-link" >다음</a></li>';
                  }
                  if(data.pagination.curRange != data.pagination.rangeCnt && data.pagination.rangeCnt > 0){
                    pagination += '<li class="page-item last" data-cnt = "'+data.pagination.pageCnt +'"><a href="javascript:page('+data.pagination.pageCnt +');" data-cnt = "'+data.pagination.pageCnt +'" class="page-link" >끝</a></li>';
                  }
                    pagination += '</ul>';

                $('#point').html("총 "+data.cnt+" 건 검색결과");
                  $("#boardList").empty();

                  if(results.length == 0){
                    str = '<tr class ="board-resultZero-tr"><td class="hell" colspan="5" style="text-align: center !important;"><span>조회된 검색 결과가 없습니다.</span></td></tr>';
                  }

                  $("#boardList").append(str);
                  $("#pagination").empty();
                  $("#pagination").append(pagination);
            },
              error : function(){
                  swal("error");
              }
          });

          var scrollPosition = $("#point").offset().top;

          $("body").animatedScroll({scrollTop: scrollPosition}, 300);
    };






    /* 찜하기 JS */
    		$(document).on('click','.text-center .firstBox',function() {

    			var where = $(this).parent().parent().attr("id");
    			var dataId = $(this).data("id");

    			var took = where+" svg";


    			if(typeof memberId == "undefined"){
    				swal("로그인 후 관심공고를 추가 하실 수 있습니다.");
    			}else{
    				if($("#svg"+dataId).hasClass("pickOn") === false){
    					console.log("#svg"+dataId+"에 pickOn이 없다. NOPICK");
     		        	$.ajax({
    		    	        url : "recruitPickAjax",
    		    	        data : {test_id : dataId , member_id : memberId},
    		    	        type : 'post',
    		    	        success : function(data){
    		    	        	if(data.result > 0){
    			    	        	$("#svg"+dataId).addClass("pickOn");
    		    	        	}else{
    		    	        		swal("공고에 이미 참여하셔서 관심공고 설정을 하실 수 없습니다.")
    		    	        	}
    	 	    	        },
    		    	        error : function(){
    		    	            swal("error");
    		    	        }
    		    	    });
    				}else {
    					console.log("#svg"+dataId+"에 pickOn이 있다. YesPIck");
     		        	$.ajax({
    		    	        url : "recruitPickDeleteAjax",
    		    	        data : {test_id : dataId , member_id : memberId},
    		    	        type : 'post',
    		    	        success : function(data){
    		    	        	$("#svg"+dataId).removeClass("pickOn");
    	 	    	        },
    		    	        error : function(){
    		    	            swal("error");
    		    	        }
    		    	    });
     				}
    			}
    		});


    /* 검색 JS */

		var childList = {"gender":"전체 성별","type2":"전체 대상자","location":"기타 지역2"};
		var locationList =[];
		var jsonData = JSON.stringify(childList);

		$('#search').on('click',function() {
			searchClick();
		});

		function searchClick(){
			console.log('검색');

			var $children = $('#filterUl').children();
			console.log($children);

			childList = {"gender":"전체 성별","type2":"전체 대상자","location":"기타 지역2"};
			locationList =[]

			$children.each(function(i){
				var $name = $(this).data("name");
				var $value = $(this).data("value");

				if($name == 'location'){
					locationList.push($value);
					childList[$name] = locationList;
				}else{
					childList[$name] = $value;
				}
			});

			jsonData = JSON.stringify(childList);

			page(1);
		}


    /* 정렬 클릭 */
    		$('select').each(function(){
    		    var $this = $(this), numberOfOptions = $(this).children('option').length;

    		    $this.addClass('select-hidden');
    		    $this.wrap('<div class="select"></div>');
    		    $this.after('<div class="select-styled"></div>');

    		    var $styledSelect = $this.next('div.select-styled');
    		    $styledSelect.text($this.children('option').eq(0).text());

    		    var $list = $('<ul />', {
    		        'class': 'select-options'
    		    }).insertAfter($styledSelect);

    		    for (var i = 0; i < numberOfOptions; i++) {
    		        $('<li />', {
    		            text: $this.children('option').eq(i).text(),
    		            rel: $this.children('option').eq(i).val()
    		        }).appendTo($list);
    		    }

    		    var $listItems = $list.children('li');

    		    $styledSelect.click(function(e) {
    		        e.stopPropagation();
    		        $('div.select-styled.active').not(this).each(function(){
    		            $(this).removeClass('active').next('ul.select-options').hide();
    		        });
    		        $(this).toggleClass('active').next('ul.select-options').toggle();
    		    });

    		    $listItems.click(function(e) {
    		        e.stopPropagation();
    		        $styledSelect.text($(this).text()).removeClass('active');
    		        $this.val($(this).attr('rel'));

    		        $list.hide();

    		        console.log($this.attr('rel'));

    		        var thisVal = $this.val();
    		        var haha =  Number(thisVal);

    		        if($.isNumeric(haha)){
    		        	plusPage = $this.val();
    		        }else{
    			        orderBy = $this.val();
    		        }

    		        page(1);

    		    });

    		    $(document).click(function() {
    		        $styledSelect.removeClass('active');
    		        $list.hide();
    		    });

    		});

    		$('.labelCheck').on('click',function() {
    			var inputid = $(this).attr('for');
    			var flag = $("input[type='checkbox'][id='"+inputid+"']").is(':checked');

    			var $check_name = $("input[type='checkbox'][id='"+inputid+"']").attr('name');
    			var $check_value = $("input[type='checkbox'][id='"+inputid+"']").attr('value');

    			/*	라벨 클릭시 DOM 보다 jquery가 먼저 동작해서 반대로 나옴*/
    			if(!flag){
    				$(this).css({
    					background:"green",
    					color:"white"
    				})
    				var element = "<li id='filter_"+inputid+"' data-value= '"+$check_value+"' data-name ='"+$check_name+"'><span>"+$check_value+"</span><button type='button' title='삭제' onclick='deleteFilter(\""+inputid+"\")'></button></li>"
    				document.getElementById('filterUl').insertAdjacentHTML('beforeEnd',element);

    			}else{
    				$(this).css({
    					background:"transparent",
    					color:"inherit"
    				})
    				var filterId = 'filter_'+inputid;
    				document.getElementById(filterId).remove();

    			}
    		});

    		$('.labelRadio').on('click',function() {

    			radioClick($(this).attr('for'));

    		});

    		function radioClick(getFor){
    			var inputid = getFor;
    			var flag = $("input[type='radio'][id='"+inputid+"']").is(':checked');

    			/* 도구 */
    			var $radio_name = $("input[type='radio'][id='"+inputid+"']").attr('name');
    			var $radio_value = $("input[type='radio'][id='"+inputid+"']").attr('value');
    			console.log("radio_name",$radio_name);
    			var $radio_label = $('.'+$radio_name);
    			console.log("$radio_value",$radio_value);

    			var $ulli = $('#filterUl li');
    			/*	라벨 클릭시 DOM 보다 jquery가 먼저 동작해서 반대로 나옴*/
    			if(!flag){
    			/*	이미 라디오 그룹이 체크되어있다면*/
    				if($ulli.hasClass('filter_'+$radio_name)){
    					var className = 'filter_' + $radio_name;
    					$('.'+className).remove();
    				}
    				var filterId = 'filter_'+inputid;
    				var element = "<li id='filter_"+inputid+"' class ='filter_"+$radio_name+"' data-value= '"+$radio_value+"' data-name ='"+$radio_name+"'><span>"+$radio_value+"</span></li>"
    				document.getElementById('filterUl').insertAdjacentHTML('beforeEnd',element);
    			}
    		}


    		function deleteFilter(clickId){
    			/*li*/
    			var filterId2 = 'filter_'+clickId;
    			var filter = document.getElementById(filterId2);

    			var $input = $('#'+clickId);
    			$input.prop('checked',false);
    			filter.remove();
    			$input.next().css({
    				background:"transparent",
    				color:"inherit"
    			})
    		}

  </script>

</body>

</html>
